<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" >
<head>
    <meta charset="UTF-8">
    <title  th:text="${Model.title}">智能提讯系统</title>
    <link rel="stylesheet" href="/layui/css/layui.css">
    <link rel="stylesheet" href="/uimaker/css/common.css">
</head>
<style>
    .layui-card{
        box-shadow: 0 0px 0px 0 rgba(0,0,0,.05);
    }
    .layui-card-header{
        background-color: #E5F4FD;
        border: 2px solid #FFFFFF;
        font-weight: bold;
    }
    .layui-elem-quote {
        border-left: 5px solid #007aff !important;
    }
    html{
        background-color: #FFFFFF;
    }

    .font_red_color{
        color: #000;
    }
    .font_blue_color{
        color: #1171d6;
    }
    .layui-col-md9 td{
        text-align: left;
    }
    .atalk{
        margin:10px;
    }
    .atalk p{
        color: #999;
    }
    .atalk span{
        display:inline-block;
        background:#0181cc;
        border-radius:10px;
        color:#fff;
        padding:5px 10px;
        word-wrap:break-word;
        margin-top: 5px;
    }
    .btalk{
        margin:10px;
        text-align:right;
    }
    .btalk p{
        color: #999;
    }
    .btalk span{
        display:inline-block;
        background:#ef8201;

        border-radius:10px;
        color:#fff;
        padding:5px 10px;
        word-wrap:break-word;
        /*text-align: left;*/
        margin-top: 5px;
    }
    table td {
        text-align: left;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
    }
    .layui-table td{
        word-break: break-all;/*必须*/
        white-space: normal;
        text-align: left;
    }

    .highlight_left{
     color: #FFFF00 !important ;text-shadow: black 0.1em 0.1em 0.2em;font-weight: bold;
    }

    .highlight_right{
        color: #bfff00 !important ;text-shadow: black 0.1em 0.1em 0.2em;font-weight: bold;
    }

    .highlight_all{
        color: #156b4b !important ;font-weight: bold;
        background-color: #FFFF00;
    }
    .highlight_dq{
        color: rgba(34, 214, 61, 0.85) !important ;font-weight: bold;
        background-color: #FFFF00;
    }

    @-webkit-keyframes fade{	/*透明度由0到1*/
        0%{ color: #FFFFFF; background-color: red;}
        100%{ background-color:transparent;}
    }
    .highlight_monitorall {
        -webkit-animation: fade 1s infinite ease-in-out;
    }
    ::-webkit-scrollbar {
        width: 0px;
    }

    #videos::-webkit-scrollbar
    {
        width: 8px;
        height: 8px;
        background-color: #F5F5F5;
    }

    /*定义滚动条轨道 内阴影+圆角*/
    #videos::-webkit-scrollbar-track
    {
        -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
        border-radius: 10px;
        background-color: #F5F5F5;
    }

    /*定义滑块 内阴影+圆角*/
    #videos::-webkit-scrollbar-thumb
    {
        border-radius: 10px;
        -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,.3);
        background-color: rgba(100, 100, 100, 0.7);
    }
    .layui-btn+.layui-btn {
        margin-left: 0px;
    }

    #recorddetail_scrollhtml{
        width:100%; height: 650px; overflow-x: hidden; overflow-y: hidden;padding-right: 10px;
    }

    #recorddetail_scrollhtml:hover{
        overflow-y: scroll;
    }

    #recorddetail_scrollhtml::-webkit-scrollbar
    {
        width: 8px;
        height: 8px;
        background-color: #F5F5F5;
    }
    #recorddetail_scrollhtml::-webkit-scrollbar-thumb
    {
        border-radius: 10px;
        -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.25);
        background-color: rgba(203, 203, 203, 0.1);
    }



    .table_td_tt{padding: 7px 7px 7px 15px;white-space: normal;border-bottom: 1px solid #CCCCCC;outline: none;}
    .table_td_tt label{padding: 0px;white-space: normal;outline: none;font-size: 16px;vertical-align:middle;}
    .table_td_tt span{padding: 0px;white-space: normal;outline: none;font-size: 16px;}


    label[name='w']:empty:before{
        content: attr(placeholder);
        color:#CCCCCC;
    }
    label[name='w']:focus:before{
        content:none;
    }

    label[name='q']:empty:before{
        content: attr(placeholder);
        color:#CCCCCC;
    }
    label[name='q']:focus:before{
        content:none;
    }
    #btnadd{
        text-align: center;
    }
   /* #recorddetail{
        cursor:text
    }*/

</style>
<body>
<div class=" layadmin-message-fluid" style="margin: 20px;">
    <div th:replace="header :: header">...</div>

    <div class="layui-elem-quote layui-row" style=" padding: 10px;">
        <div class="layui-col-md8">
            <h3 th:text="${Model.title}">智能提讯系统</h3>
        </div>
        <div class="layui-col-md4" style="display: none" id="gZIPVod_html">
            <div class="layui-col-md3" style="text-align: right">进度：</div>
            <div class="layui-col-md9">

            </div>
        </div>
    </div>

    <div class="layui-row layui-form " >
            <div class="layui-col-md3 " style="height: 810px;border:1px  solid #F2F2F2; overflow-x: hidden; overflow-y: scroll;" >
                <div class="layui-card">
                    <div class="layui-card-header" style="white-space: nowrap;text-overflow: ellipsis; overflow: hidden;" >
                        当前笔录：<span id="recordtitle"  >笔录标题</span>
                       <!-- <a class="layui-a-tips" onclick="opneModal_1();">切换笔录</a>-->
                    </div>
                </div>
                 <div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief" style="height: 49%">
                        <ul class="layui-tab-title">
                            <li class="layui-this">案件信息<!--<i class="layui-icon layui-icon-edit" style="font-size: 20px;color: red" title="编辑" onclick="open_casetouser()"></i>--></li>
                            <li id="asr_html" style="display: none">语音识别<span id="webkit2"></span></li><!--onclick="getRecord();"-->
                        </ul>
                        <div class="layui-tab-content" style="height: 90%" >
                            <div class="layui-tab-item layui-show" style="height:100%;overflow-x: hidden; overflow-y: scroll;">
                                <div class="layui-card">
                                    <div  >
                                        <div class="layui-card-body">
                                                <table class="layui-table" lay-skin="line" style="table-layout: fixed" >
                                                   <tbody id="caseAndUserInfo_html">
                                                       <tr>
                                                           <td style="width: 30%">案件名称</td>
                                                           <td></td>
                                                       </tr>
                                                       <tr>
                                                           <td>被询(讯)问人</td>
                                                           <td></td>
                                                       </tr>
                                                       <tr>
                                                           <td>当前案由</td>
                                                           <td></td>
                                                       </tr>
                                                       <tr>
                                                           <td>案件时间</td>
                                                           <td></td>
                                                       </tr>
                                                       <tr>
                                                           <td>案件编号</td>
                                                           <td></td>
                                                       </tr>
                                                   </tbody>
                                                </table>
                                         </div>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-tab-item" id="record_hoverhtml"style="height:100%;">
                                <div class="layui-card-header" style="border: none;height: 12%;font-weight: normal;background-color: transparent;overflow: hidden;line-height: normal;display: none" id="recordreals_selecthtml">
                                    <div class="layui-col-md7 layui-col-xs7 layui-col-lg7" >
                                        <input type="text" name="recordreals_select" lay-verify="required" placeholder="搜索内容" autocomplete="off" class="layui-input" id="recordreals_select" oninput="recordreals_select();" >
                                    </div>
                                    <div class="layui-col-md5 layui-col-xs5  layui-col-lg5 layui-btn-group" >
                                            <button type="button" class="layui-btn layui-btn-normal" onclick="last_realtxt();" >
                                                <i class="layui-icon">&#xe619;</i>
                                            </button>
                                            <button type="button" class="layui-btn layui-btn-normal "onclick="next_realtxt();">
                                                <i class="layui-icon">&#xe61a;</i>
                                            </button>
                                    </div>
                                </div>
                                <div class="layui-card" style="box-shadow: initial;height: 86%;overflow-x: hidden; overflow-y: scroll;" id="recordreals_scrollhtml">
                                    <div class="layui-card-body" >
                                        <div class="talk_show"  id="recordreals" >

                                        </div>
                                    </div>
                                </div>
                            </div>
                           <!-- <div class="layui-tab-item">身心监测</div>-->
                        </div>
                </div>
                <div class="layui-col-md12" style="margin-bottom: 10px;">
                    <div class="layui-col-md12">
                        <div th:replace="video :: video"   >...</div>
                    </div>
                    <div class="layui-col-md12" style="line-height: 50px">
                        <div style="width: 95%">
                            <!--<button type="button" id="goleft" class="layui-btn layui-btn-sm layui-btn-primary" style="float: left;"><i class="layui-icon layui-icon-left"></i></button>-->
                            <div style="overflow-x: auto;overflow-y: hidden;white-space: nowrap;width:100%;margin:5px;" id="videos">
                            </div>
                            <!--<button type="button" id="goright"  class="layui-btn layui-btn-sm layui-btn-primary" style="float: right;"><i class="layui-icon layui-icon-right"></i></button>-->
                        </div>
                    </div>
                </div>
            </div>
            <div class="layui-col-md9"  style="height: 810px;border:1px  solid #F2F2F2; overflow-x: hidden; overflow-y: scroll;" >
                   <button class="layui-btn layui-btn-normal " onclick="javascript:window.history.go(-1);return false;">返回上一页</button>
                   <div class="layui-inline" style="margin-bottom:0">
                        <div class="layui-unselect layui-form-select" name="btn_div"   showorhide="false">
                            <div class="layui-select-title">
                                <button type="button"  value="" readonly="" class="layui-btn layui-btn-normal" onclick="btn(this);"><i class="layui-icon" >&#xe601;</i>  导出</button>
                            </div>
                            <dl class="layui-anim layui-anim-upbit" style="z-index: 1000">
                                <dd lay-value="" class="" onclick="exporttemplate_ue(1);">导出word</dd><!--onclick="exportWord(this);"-->
                                <dd lay-value="" class="" onclick="exporttemplate_ue(2);">导出pdf</dd><!--onclick="exportPdf(this);"-->
                                <dd lay-value="" class="" onclick="export_asr();">导出识别内容</dd>
                            </dl>
                        </div>
                 </div>
                <button class="layui-btn layui-btn-normal " onclick="open_tagtext();">打点标记</button>
                <div class="layui-inline" style="float: right">
                    <label class="layui-form-label" style="width: 100px">定位差值(秒)：</label>
                    <div class="layui-input-inline" style="width: 80px;">
                        <input type="number" name="positiontime"  id="positiontime"  readonly  title="点击可修改" autocomplete="off" class="layui-input" onclick="open_positiontime()">
                    </div>

                </div>
                    <div class="layui-card" style="position:fixed;">
                        <div class="layui-card-header">笔录回放
                        </div>
                        <div class="layui-card-body" style="padding: 0px 0px 0px 15px">
                            <!--视频点播区域-->
                            <div class="layui-row" style="">
                                <div class="layui-col-md12" id="record_qw_HTML" >
                                    <div class="layui-card">
                                        <div class="layui-col-md12">
                                            <div class="layui-col-md3">
                                                <strong id="recorddetail_strong"></strong>
                                            </div>
                                            <div class="layui-col-md9">
                                                <div style="float: right;display: none" id="wqutil">
                                                    <!--<button class="layui-btn layui-btn-warm" onclick="focuslable(null,2,'q');" >添加一行</button>-->
                                                    <button class="layui-btn layui-btn-normal"  id="baocun" >保存</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="recorddetail_webkit" >
                                            <div  id="recorddetail_scrollhtml" >
                                                <div class="layui-card-body" id="recorddetail_body" style="padding: 0"><!--style="position:fixed;"-->
                                                    <!--<div class="layui-col-md12  layui-show" style="height: 300px">
                                                        <iframe src=""  frameborder="0" class="layui-iframe"  id="wordheaddownurl" name="wordheaddownurl" style="height: 100%;width: 100%"></iframe>
                                                    </div>
                                                    <table class="layui-table"  lay-skin="nob" style="table-layout: fixed;margin-bottom: 30px;width: 95%">
                                                        <tbody id="recorddetail">

                                                        </tbody>
                                                    </table>-->
                                                    <script  id="editor" name="editor" textareaid="editor" type="text/plain"  ></script>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


            </div>
    </div>
    <div th:replace="footer :: footer">...</div>
</div>
<script th:src="@{/js/jquery-1.11.1.js}" type="text/javascript"></script>
<script th:src="@{/js/common.js}"  type="text/javascript" ></script>
<script th:src="@{/js/actionid.js}" type="text/javascript"></script>
<script th:src="@{/js/list.js}" type="text/javascript"></script>
<script th:src="@{/js/url.js}" type="text/javascript"></script>
<script th:src="@{/js/wavesurfer.min.js}"></script>
<script th:src="@{/js/echarts.min.js}" type="text/javascript"></script>
<script th:src="@{/layui/layui.js}"type="text/javascript"></script>
<script th:src="@{/layui/lay/modules/laytpl.js}" type="text/javascript"></script>
<script th:src="@{/js/client_web/court/getCourtDetail.js}" type="text/javascript"></script>
<script th:src="@{/pdfjs/pdf.js}" type="text/javascript"></script>
<script type="text/javascript" src="/ueditor/ueditor.config.js"></script>
<script type="text/javascript" src="/ueditor/ueditor.all.js"></script>
<script type="text/javascript" src="/ueditor/lang/zh-cn/zh-cn.js"></script>
<script type="text/javascript" charset="utf-8" src="/ueditor/toword.js"> </script>
<script th:inline="javascript">
    var INIT_CLIENT=[[${session.INIT_CLIENT}]];
    var INIT_CLIENTKEY=[[${session.INIT_CLIENTKEY}]];
    var recordssid =[[${Model.recordssid}]];
    var sessionadminssid=[[${session.MANAGE_CLIENT.ssid}]];
    var tocaseToUserURL;
    var gnlist=[[${session.AUTHORIZATIONALL_CLIENT.gnlist}]];

    var editorhtml;//editor的html
    var ue = UE.getEditor('editor', {
        toolbars: [
            [ 'undo', //撤销
                'redo', //重做
                'bold', //加粗
                'indent', //首行缩进
                'italic', //斜体
                'underline', //下划线
                'strikethrough', //删除线
                'subscript', //下标
                'fontborder', //字符边框
                'superscript', //上标
            ],
            ['time', //时间
                'date', //日期
                'fontsize', //字号
                'justifyleft', //居左对齐
                'justifyright', //居右对齐
                'justifycenter', //居中对齐
                'justifyjustify', //两端对齐
                'fontfamily',//字体
                'forecolor', //字体颜色
                'backcolor', //背景色
                'rowspacingtop', //段前距
                'rowspacingbottom', //段后距
                'lineheight',//行间距
                'print', //打印
                'preview', //预览
            ]
        ],
        allHtmlEnabled:true,
        autoFloatEnabled: false,
        serverUrl:"upload",
        initialFrameWidth:1017, //初始化编辑器宽度,默认1000,编辑框1000+下拉滚动条17
        initialFrameHeight:1020,  //初始化编辑器高度,默认1000
        autoHeightEnabled:false,
        initialContent:"<div tabindex=\"0\" hidefocus=\"true\"  id='"+TOWORD.divpage.getnextpagedivid()+"' style= '"+TOWORD.divpage.divcss()+"'><p ></p></div>"
    });
    function onfocusfnc(num){
        TOWORD.divpage.changediv(num);
    }

    ue.ready(function() {
        var divid=TOWORD.divpage.getpagedivid(1);//初始化的num=1
        var div=TOWORD.page.getifamedivByDivid(divid);
        div.setAttribute("num",1);
        div.addEventListener("onfocus",onfocusfnc);
        editorhtml=$("#editor iframe").contents();
    });

    $(function(){
        setpageAction(INIT_CLIENT,"client_web/court/getCourtDetail");
        tocaseToUserURL= getActionURL(getactionid_manage().getCourtDetail_tocaseToUser);
        $('#recorddetail_webkit, #recorddetail_scrollhtml div:eq(0)').css({'width':($("#recorddetail_scrollhtml").closest(".layui-col-md9").width())});
        $(window).resize(function(){
            $('#recorddetail_webkit, #recorddetail_scrollhtml div:eq(0)').css({'width':($("#recorddetail_scrollhtml").closest(".layui-col-md9").width())});
        });
        getRecordById();//获取笔录案件等信息
    });
    layui.use(['layer','element','slider','form'], function(){
        var layer = layui.layer; //获得layer模块
        var element = layui.element;
        var slider = layui.slider;
        var form = layui.form;
        //使用模块
        //设置步长(应该放在video。HTML里面的，但是放在里面就会出问题)
        slider.render({
            elem: '#slideTest4'
            , step: 20, //步长
            value: initvolume, //初始值
            theme: '#C5C5C5',//主题色
            change: function(value){
                //动态获取滑块数值
                value=value.replace(/[^0-9]/ig,"");
                var val=parseFloat(value);
                val=val/100;
                SewisePlayer.setVolume(val);
            }
            ,setTips: function(value){ //自定义提示文本
                return '音量:'+value;
            }
        });
    });


</script>
</body>
</html>