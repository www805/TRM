<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>智能提讯系统</title>
    <link rel="stylesheet" href="/layui/css/layui.css">
    <link rel="stylesheet" href="/uimaker/css/admin.css">
    <link rel="stylesheet" href="/uimaker/css/common.css">
</head>
<style>
    .layui-card{
        box-shadow: 0 0px 0px 0 rgba(0,0,0,.05);
    }
    .layui-card-header{
        background-color: #E5F4FD;
        border: 2px solid #FFFFFF;
        font-weight: bold;
    }

    ::-webkit-scrollbar{
        width: 0px;
    }
    html{
        background-color: #FFFFFF;
    }
    .layui-col-md2 .layui-colla-title  i{
        display: none;
    }
    .layui-col-md2 .layui-elem-quote:hover{
        color: #1E9FFF;
    }
    .layui-col-md2 .layui-table td{
        padding-left:20px;
    }
    .first-tab i.layui-tab-close{
        display:none!important;
    }
    .layui-form-label{
        width: 120px;
    }
    .layui-input-block {
        margin-left: 150px;
    }
    .layui-col-space10>* {
        padding: 10px;
    }
   .layui-tab-title .layui-this{
        font-size: 30px !important;
    }

</style>
<body>
<div class="layadmin-message-fluid" style="margin: 20px;">
    <div class="layui-container">
        <div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief" style="margin-top: 80px">
            <ul class="layui-tab-title">
                <li class="layui-this" >快速庭审</li>
                <li >庭审办案</li>
            </ul>
            <div class="layui-tab-content">
                <div class="layui-tab-item layui-show">
                        <form class="layui-form layui-row" >
                            <div class="layui-col-md12">
                                <form class="layui-form layui-row" >
                                    <div class="layui-col-md12" >
                                        <div class="layui-card" >
                                                <div class="layui-card-body  layui-row layui-col-space10" >
                                                    <div class="layui-col-lg12">
                                                        <label class="layui-form-label"><span style="color: red;font-weight: initial">*</span>案件编号：</label>
                                                        <div class="layui-input-block">
                                                            <input type="text" name="casenum2" id="casenum2"  lay-verify="casenum2" placeholder="" autocomplete="off" class="layui-input">
                                                        </div>
                                                    </div>
                                                    <div class="layui-col-lg12" id="multifunctionbool_showorhide2" >
                                                        <label class="layui-form-label "  ><span style="color: red;">*</span>承办庭：</label>
                                                        <div class="layui-input-block">
                                                            <input    type="text" name="modelssid2" id="modelssid2" lay-verify="modelssid2" placeholder="" autocomplete="off" class="layui-input" readonly   onclick="open_model()">
                                                        </div>
                                                    </div>
                                                    <div class="layui-col-lg6 layui-col-lg-offset6 ">
                                                        <div class="layui-input-block" >
                                                            <button class=" layui-btn layui-btn-primary  layui-btn-lg"  style="float: right"  id="startrecord_btn2"  lay-submit="" lay-filter="startrecord_btn2">保存</button>
                                                        </div>
                                                    </div>
                                                </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </form>
                </div>
                <div class="layui-tab-item">
                        <form class="layui-form layui-row" >
                            <div class="layui-col-md12" id="case">
                                <div class="layui-card" >
                                    <div class="layui-card-body  layui-row layui-col-space10" >
                                            <div class="layui-col-lg6">
                                                <label class="layui-form-label"><span style="color: red;font-weight: initial">*</span>案件类型：</label>
                                                <div class="layui-input-block">
                                                    <select name="recotdtypes"  id="recotdtypes"  lay-search="" lay-verify="recotdtypes" >
                                                        <option value=""></option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="layui-col-lg6">
                                                <label class="layui-form-label">庭审时间：</label>
                                                <div class="layui-input-block">
                                                    <input type="text" name="starttime" id="starttime"  placeholder="" autocomplete="off" class="layui-input">
                                                </div>
                                            </div>
                                            <div class="layui-col-lg12">
                                                <label class="layui-form-label">案件编号：</label>
                                                <div class="layui-input-block">
                                                    <input type="text" name="casenum" id="casenum"  lay-verify="casenum" placeholder="" autocomplete="off" class="layui-input">
                                                    <i class="layui-icon layui-icon-search" style="position: absolute;top:8px;right:  8px;cursor: pointer;" onclick="getCasesByCasenum();"></i>
                                                </div>
                                            </div>
                                            <div class="layui-col-lg6">
                                                <label class="layui-form-label">原告：</label>
                                                <div class="layui-input-block">
                                                    <input type="text" name="userinfograde1" id="plaintiff"    placeholder="" autocomplete="off" class="layui-input"  onclick="getUserByCard('userinfograde1')" >
                                                    <i class="layui-icon layui-icon-add-circle" style="position: absolute;top:8px;right:  8px;cursor: pointer;color:#ccc" onclick="adduser(this,1)" title="追加"></i>
                                                </div>
                                            </div>
                                            <div class="layui-col-lg6">
                                                <label class="layui-form-label"><span style="color: red;font-weight: initial">*</span>被告：</label>
                                                <div class="layui-input-block">
                                                    <input type="text" name="userinfograde2"  id="username"  lay-verify="username" placeholder="" autocomplete="off" class="layui-input" onclick="getUserByCard('userinfograde2')" >
                                                    <i class="layui-icon layui-icon-add-circle" style="position: absolute;top:8px;right:  8px;cursor: pointer;color:#ccc" onclick="adduser(this,2)" title="追加"></i>
                                                </div>
                                            </div>
                                            <div class="layui-col-lg6">
                                                <label class="layui-form-label">原告诉讼代理人：</label>
                                                <div class="layui-input-block">
                                                    <input type="text" name="userinfograde8" id="plaintiff_agent"   placeholder="" autocomplete="off" class="layui-input"  onclick="getUserByCard('userinfograde8')">
                                                    <i class="layui-icon layui-icon-add-circle" style="position: absolute;top:8px;right:  8px;cursor: pointer;color:#ccc" onclick="adduser(this,8)" title="追加"></i>
                                                </div>
                                            </div>

                                            <div class="layui-col-lg6">
                                                <label class="layui-form-label">被告诉讼代理人：</label>
                                                <div class="layui-input-block">
                                                    <input type="text" name="userinfograde3" id="defendant_agent"  placeholder="" autocomplete="off" class="layui-input"  onclick="getUserByCard('userinfograde3')">
                                                    <i class="layui-icon layui-icon-add-circle" style="position: absolute;top:8px;right:  8px;cursor: pointer;color:#ccc" onclick="adduser(this,3)" title="追加"></i>
                                                </div>
                                            </div>
                                            <div class="layui-col-lg6">
                                                <label class="layui-form-label"><span style="color: red;font-weight: initial">*</span>审判长：</label>
                                                <div class="layui-input-block">
                                                    <select name="presidingjudge"  id="presidingjudge"  lay-search="" lay-filter="presidingjudge" lay-verify="presidingjudge" >
                                                        <option value=""></option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="layui-col-lg6">
                                                <label class="layui-form-label">审判员：</label>
                                                <div class="layui-input-block">
                                                    <select name="judges"  id="judges"  lay-search="" lay-filter="judges" >
                                                        <option value=""></option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="layui-col-lg12">
                                                <label class="layui-form-label">承办人：</label>
                                                <div class="layui-input-block">
                                                    <select name="承办人"  id="承办人"   lay-verify=""   >
                                                        <option value=""  th:value="${session.MANAGE_CLIENT.username}"  selected = "selected">[[${session.MANAGE_CLIENT.username}]]</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="layui-col-lg12" id="multifunctionbool_showorhide" >
                                                <label class="layui-form-label " >承办庭：</label>
                                                <div class="layui-input-block">
                                                    <input type="text" name="modelssid" id="modelssid"  placeholder="" autocomplete="off" class="layui-input" readonly   onclick="open_model()">
                                                </div>
                                            </div>
                                            <div class="layui-col-lg6">
                                                <label class="layui-form-label">案由：</label>
                                                <div class="layui-input-block">
                                                    <div class="layui-form-select">
                                                        <div class="layui-select-title">
                                                            <input type="text" name="cause"  placeholder="" autocomplete="off" class="layui-input" id="cause" oninput="getCauseList()"  onblur="select_causeblur();" onfocus="getCauseList()">
                                                        </div>
                                                        <dl class="layui-anim layui-anim-upbit"  id="cause_text"   >

                                                        </dl>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="layui-col-lg6">
                                                <label class="layui-form-label"><span style="color: red;font-weight: initial">*</span>案件名称：</label>
                                                <div class="layui-input-block">
                                                    <div class="layui-col-lg12">
                                                        <div class="layui-form-select">
                                                            <div class="layui-select-title">
                                                                <input type="text" name="casename" lay-verify="casename" placeholder="请输入案件名称" autocomplete="off" class="layui-input" id="casename" oninput="getCaseList()"  onblur="select_caseblur();" onfocus="getCaseList()">
                                                                <i class="layui-icon layui-icon-add-circle" style="position: absolute;top:8px;right:  8px;cursor: pointer;" title="选择其他案件" onclick="open_othercases();"></i>
                                                            </div>
                                                            <dl class="layui-anim layui-anim-upbit"  id="casename_ssid"   >

                                                            </dl>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="layui-col-lg12">
                                                <label class="layui-form-label">书记员：</label>
                                                <div class="layui-input-block">
                                                    <select name="recordadminssid"  id="recordadminssid"  lay-search="" lay-filter="recordadminssid" >
                                                        <option value=""></option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="layui-col-lg12">
                                                <label class="layui-form-label">陪审员：</label>
                                                <div class="layui-input-block">
                                                    <select name="otheradminssid"  id="otheradminssid"  lay-search="" lay-filter="otheradminssid" >
                                                        <option value=""></option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="layui-col-lg6" ><!--style="margin-right: 50%"-->
                                                <label class="layui-form-label">询问次数：</label>
                                                <div class="layui-input-block">
                                                    <input type="number" name="asknum" id="asknum"  placeholder="" autocomplete="off" class="layui-input" disabled value="0" >
                                                </div>
                                            </div>
                                            <div class="layui-col-lg6 layui-col-lg-offset6 ">
                                                <div class="layui-input-block" >
                                                    <button class=" layui-btn layui-btn-primary  layui-btn-lg"  style="float: right"  id="startrecord_btn"  lay-submit="" lay-filter="startrecord_btn">保存</button>
                                                </div>
                                            </div>
                                        </div>
                                </div>
                            </div>
                        </form>
                </div>
            </div>
        </div>
    </div>
    <div th:replace="footer :: footer">...</div>
</div>
</body>

<script th:src="@{/js/jquery-1.11.1.js}" type="text/javascript"></script>
<script th:src="@{/js/url.js}" type="text/javascript"></script>
<script th:src="@{/js/common.js}"  type="text/javascript" ></script>
<script th:src="@{/js/actionid.js}" type="text/javascript"></script>
<script th:src="@{/js/list.js}" type="text/javascript"></script>
<script th:src="@{/layui/layui.js}"type="text/javascript"></script>
<script th:src="@{/layui/lay/modules/laytpl.js}" type="text/javascript"></script>
<script th:src="@{/js/socket.io.js}" type="text/javascript"></script>
<script th:src="@{/js/client_web/court/quickCourt.js}" type="text/javascript"></script>

<script th:inline="javascript">
    var INIT_CLIENT;
    var INIT_CLIENTKEY;
    var sessionworkname=[[${session.MANAGE_CLIENT.workname}]];
    var sessionusername=[[${session.MANAGE_CLIENT.username}]];
    var sessionadminssid=[[${session.MANAGE_CLIENT.ssid}]];
    var model_index=null;//模板index
    $(function(){
        INIT_CLIENT=[[${session.INIT_CLIENT}]];
        INIT_CLIENTKEY=[[${session.INIT_CLIENTKEY}]];
        setpageAction(INIT_CLIENT,"client_web/court/quickCourt");
        getRecordtypes();
        getAdminList();
        getDefaultMtModelssid();//获取默认的会议模板ssid
        getMc_model();//获取全部的会议模板
        getWordTemplates();
        getCaseById();
    });
    layui.use(['layer','element','form','laydate'], function(){
        var layer = layui.layer; //获得layer模块
        var element = layui.element;
        var form = layui.form;
        var laydate = layui.laydate;
        //使用模块

        element.render();
        laydate.render({
            elem: '#both' //指定元素
        });
        laydate.render({
            elem: '#validity' //指定元素
        });



        laydate.render({
            elem: '#starttime' //指定元素
            ,type:"datetime"
            ,value: new Date(Date.parse(new Date()))
            ,format: 'yyyy-MM-dd HH:mm:ss',
        });

        form.on('select(otheradminssid)', function(data){
            var recordadminssid=$("#recordadminssid").val();
            var judges=$("#judges").val();
            var presidingjudge=$("#presidingjudge").val();
            if ((isNotEmpty(recordadminssid)&&recordadminssid==data.value)||(isNotEmpty(judges)&&judges==data.value)||(isNotEmpty(presidingjudge)&&presidingjudge==data.value)) {
                $('#otheradminssid').prop('selectedIndex', 0);
                layer.msg("用户不能重复使用",{icon: 5});
                form.render();
            }
        });

        form.on('select(recordadminssid)', function(data){
            var otheradminssid=$("#otheradminssid").val();
            var judges=$("#judges").val();
            var presidingjudge=$("#presidingjudge").val();
            if ((isNotEmpty(otheradminssid)&&otheradminssid==data.value)||(isNotEmpty(judges)&&judges==data.value)||(isNotEmpty(presidingjudge)&&presidingjudge==data.value)) {
                $('#recordadminssid').prop('selectedIndex', 0);
                layer.msg("用户不能重复使用",{icon: 5});
                form.render();
            }
        });

        form.on('select(judges)', function(data){
            var otheradminssid=$("#otheradminssid").val();
            var recordadminssid=$("#recordadminssid").val();
            var presidingjudge=$("#presidingjudge").val();
            if ((isNotEmpty(otheradminssid)&&otheradminssid==data.value)||(isNotEmpty(recordadminssid)&&recordadminssid==data.value)||(isNotEmpty(presidingjudge)&&presidingjudge==data.value)) {
                $('#judges').prop('selectedIndex', 0);
                layer.msg("用户不能重复使用",{icon: 5});
                form.render();
            }
        });

        form.on('select(presidingjudge)', function(data){
            var otheradminssid=$("#otheradminssid").val();
            var recordadminssid=$("#recordadminssid").val();
            var judges=$("#judges").val();
            if ((isNotEmpty(otheradminssid)&&otheradminssid==data.value)||(isNotEmpty(recordadminssid)&&recordadminssid==data.value)||(isNotEmpty(judges)&&judges==data.value)) {
                $('#presidingjudge').prop('selectedIndex', 0);
                layer.msg("用户不能重复使用",{icon: 5});
                form.render();
            }
        });


        form.verify({
            username:[ /\S/,"请输入被告人"],
            recotdtypes:[ /\S/,"请选择案件类型"],
            casename:[ /\S/,"请输入案件名称"],
            presidingjudge:[ /\S/,"审判长不能为空"],
            casenum2:[ /\S/,"案件编号不能为空"],
            modelssid2:[ /\S/,"承办庭不能为空"],
        });

        form.on('submit(startrecord_btn)', function (data) {
            addCaseToArraignment();
            return false;
        });
        form.on('submit(startrecord_btn2)', function (data) {
            //只需要承办庭和案件号码
            addCaseToArraignment2();
            return false;
        });


    });



</script>
</html>