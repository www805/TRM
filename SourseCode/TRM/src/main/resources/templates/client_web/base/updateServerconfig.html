<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" >
<head>
    <meta charset="UTF-8">
    <title th:text="${updateServerconfigModel.title}">智能提讯系统</title>
    <link rel="stylesheet" href="/layui/css/layui.css">
    <link rel="stylesheet" href="/uimaker/css/common.css">
</head>
<style>
    .layui-form-pane .layui-form-label {
        width: 150px;
    }
    .layui-form-pane .layui-input-block {
        margin-left: 150px;

    }
    .layui-form-pane .layui-input-inline {
        width: 50%;
    }
    .layui-layer-content {
        position: relative;
        padding: 20px;
        line-height: 24px;
        word-break: break-all;
        overflow: hidden;
        font-size: 14px;
        overflow-x: hidden;
        overflow-y: auto;
    }
</style>
<body>
<div class=" layadmin-message-fluid" style="margin: 20px;">
    <div th:replace="header :: header">...</div>

    <div class="layui-elem-quote" style=" padding: 10px;visibility:hidden " id="quote_html">
        <h3 th:text="${updateServerconfigModel.title}">智能提讯系统</h3>
    </div>
    <form class="layui-form layui-form-pane layui-main site-inline" style="margin-top: 20px">
        <!--<span style="margin-left: 10px;color: #9F9F9F;">（以下配置暂只能读不能修改，如要修改请到服务器端进行修改）</span>-->
        <div class="layui-progress " lay-showpercent="true" lay-filter="progress_demo" style="visibility:hidden;margin-bottom: 10px">
            <div class="layui-progress-bar "  ><span class="layui-progress-text">10%</span></div>
        </div>

        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
            <legend>系统相关设置</legend>
        </fieldset>
        <div class="layui-form-item">
            <label class="layui-form-label"><span style="color: red;">*</span>客户端名称</label>
            <div class="layui-input-block">
                <input type="text" name="clientname" id="clientname" lay-verify="title" autocomplete="off" placeholder="请输入系统名称" class="layui-input">
            </div>
        </div>
        <div id="oem_hk" style="display: none">
            <div class="layui-form-item">
                <label class="layui-form-label">LOGO</label>
                <div class="layui-input-block">
                    <button type="button" class="layui-btn layui-btn-normal layui-input" id="test1" style="background-color: #1e9fff" onclick="$('#client_url').click();"><i class="layui-icon"></i>上传图片</button>
                    <input id="client_url" type="file" accept="image/gif,image/jpeg,image/jpg,image/png" onchange="showimg(this);" style="display: none;">
                    <div class="layui-inline layui-word-aux">
                    </div>
                    <div class="layui-elem-quote layui-quote-nm" style="margin-top: 10px;">
                        预览图：
                        <div class="layui-upload-list" id="test-upload-more-list">
                            <img src="" id="client_urlshow" style="" alt="">
                        </div>
                    </div>
                </div>

            </div>
                <!--<div class="layui-form-item">
                    <label class="layui-form-label"><span style="color: red;">*</span>服务器IP</label>
                    <div class="layui-input-block">
                        <input type="text" name="serverip" id="serverip" lay-verify="title" autocomplete="off" placeholder="请输入服务器IP" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label"><span style="color: red;">*</span>服务器端口</label>
                    <div class="layui-input-block">
                        <input type="number" name="serverport" id="serverport" lay-verify="title" autocomplete="off" placeholder="请输入服务器端口" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label"><span style="color: red;">*</span>同步时间</label>
                    <div class="layui-input-block">
                        <input type="number" name="workdays" id="workdays" lay-verify="title" autocomplete="off" placeholder="请输入同步时间(天)" class="layui-input">
                    </div>
                </div>-->
            <div class="layui-form-item">
                <label class="layui-form-label">授权状态</label>
                <div class="layui-input-block">
                    <button class="layui-btn  layui-btn-sm layui-btn-radius " name="authorizebool" id="authorizebool" style="margin-left: 10px;" onclick="return false;"></button>
                </div>
            </div>
        </div>
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
            <legend>笔录命名规则</legend>
        </fieldset>
        <div class="layui-form-item">
            <label class="layui-form-label" title="快速笔录名称规则">笔录名称(快速)
            </label>
            <div class="layui-input-inline">
                <input type="text" name="rule1" id="rule1" ssid=""  lay-verify="title" autocomplete="off" placeholder="默认：快速笔录_${17位时间}" class="layui-input">
            </div>
            <div class="layui-form-mid layui-word-aux">例如：快速笔录_20191228115858791</div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label"title="正常笔录名称">笔录名称(正常)
            </label>
            <div class="layui-input-inline">
                <input type="text" name="rule2" id="rule2" ssid="" lay-verify="title" autocomplete="off" placeholder="默认：${嫌疑人}《${案件名}》${类型}_第${询问次数}次" class="layui-input">
            </div>
            <div class="layui-form-mid layui-word-aux">例如：刘一《街道抢劫案》谈话办案_第1次</div>
        </div>
        <!--<div class="layui-form-item">
            <label class="layui-form-label">案件编号
            </label>
            <div class="layui-input-block">
                <input type="text" name="" id="" lay-verify="title" autocomplete="off" placeholder="默认：客户端缩写${编号}" class="layui-input">
            </div>
        </div>-->
        <div class="layui-form-item">
            <div class="layui-input-block">
                <button class=" layui-btn layui-btn-normal" onclick="updateServerconfig();" id="saveapkbtn" type="button">保存设置</button>
                <button class=" layui-btn layui-btn-normal" onclick="rebootsocket();" id="socketbtn" type="button" style="visibility: hidden;">重置通讯连接</button>
                <button class=" layui-btn layui-btn-normal" onclick="rebootftpserver();" id="ftpserverbtn" type="button" style="visibility: hidden;">重启存储服务</button>
            </div>
        </div>
    </form>

    <div th:replace="footer :: footer">...</div>
</div>


<script th:src="@{/js/jquery-1.11.1.js}" type="text/javascript"></script>
<script th:src="@{/js/common.js}"  type="text/javascript" ></script>
<script th:src="@{/js/actionid.js}" type="text/javascript"></script>
<script th:src="@{/js/list.js}" type="text/javascript"></script>
<script th:src="@{/layui/layui.js}"type="text/javascript"></script>
<script th:src="@{/layui/lay/modules/laytpl.js}" type="text/javascript"></script>
<script th:src="@{/js/client_web/base/updateServerconfig.js}" type="text/javascript"></script>
<script th:inline="javascript">
    var INIT_CLIENT;
    var INIT_CLIENTKEY;
    var gnlist = [[${session.AUTHORIZATIONALL_CLIENT.gnlist}]]; //全局授权

    var ruleindex=null;//命名规则
    $(function(){
        INIT_CLIENT=[[${session.INIT_CLIENT}]];
        INIT_CLIENTKEY=[[${session.INIT_CLIENTKEY}]];
        setpageAction(INIT_CLIENT,"client_web/base/updateServerconfig");
        getServerconfig();

        if (gnlist.indexOf(HK_O)<0){
           $("#quote_html").css("visibility","visible");
           $("#oem_hk").css("display","block");
           $("#socketbtn").css("visibility","visible");
        }
        $("#ftpserverbtn").css("visibility","visible");
    });



    layui.use(['layer','element','form'], function(){
        var layer = layui.layer; //获得layer模块
        var element = layui.element;
        var form = layui.form;
        //使用模块
        var html='<div class="layui-row layui-form " > \
        <div class="layui-col-md12 layui-form-item" style="margin-top: 10px" >\
        <ul class="site-dir layui-layer-wrap">\
            <li>${嫌疑人}：嫌疑人名称</li>\
        <li>${证件号}：嫌疑人证件号</li>\
        <li>${类型}：笔录类型</li>\
        <li>${案件名}：案件名称</li>\
        <li>${询问次数}：提讯次数</li>\
        <li>${地点}：办案地点</li>\
        <li>${17位时间}：当前年月日等</li>\
         <li>${办案场景}：会议模板、办案地点</li>\
         <li>注意：请勿重复添加</li>\
        </ul>\
        </div>\
      </div>';
        layer.open({
            type:1,
            title: '规则变量'
            ,content: html,
            offset: 'r',
            shade:0,
            btn:"",
            area: ['20%', '35%']
        });

    });
</script>
</body>
</html>