<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title th:text="${startConversationModel.title}">智能提讯系统</title>
    <link rel="stylesheet" href="/layui/css/layui.css">
    <link rel="stylesheet" href="/uimaker/css/common.css">
</head>
<style>
    .layui-card{
        box-shadow: 0 0px 0px 0 rgba(0,0,0,.05);
    }
    .layui-card-header{
        background-color: #E5F4FD;
        border: 2px solid #FFFFFF;
        font-weight: bold;
    }

    ::-webkit-scrollbar{
        width: 0px;
    }
    html{
        background-color: #FFFFFF;
    }
    .layui-col-md2 .layui-colla-title  i{
        display: none;
    }
    .layui-col-md2 .layui-elem-quote:hover{
        color: #1E9FFF;
    }
    .layui-col-md2 .layui-table td{
        padding-left:20px;
    }
    .first-tab i.layui-tab-close{
        display:none!important;
    }
</style>

<form class="layui-form"  style="margin: 10px">

    <div class="layui-elem-quote" style=" padding: 10px;">
        <h3 th:text="${startConversationModel.title}">智能提讯系统</h3>
    </div>
        <div class="layui-col-md12 layui-col-xs12  layui-col-lg12 " >
                <div class="layui-card" >
                    <div class="layui-card-header">人员基本信息
                        <i class="layui-icon layui-icon-template " id="getCardreader_btn" title="点击开始读卡" style="position: absolute;right: 15px;color: #1E9FFF;cursor: pointer"></i>
                    </div>
                    <div style=" margin: auto;">
                        <div class="layui-card-body  layui-row layui-col-space10"  >
                            <div class="layui-col-md6 layui-col-xs6 layui-col-lg6">
                                <label class="layui-form-label">证件类型</label>
                                <div class="layui-input-block">
                                    <select name="cards"  id="cards"  lay-filter="change_card">
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-col-md6 layui-col-xs6 layui-col-lg6">
                                <label class="layui-form-label"><span style="color: red;font-weight: initial">*</span>证件号码</label>
                                <div class="layui-input-block">
                                    <div class="layui-form-select">
                                        <div class="layui-select-title">
                                            <input type="text" name="cardnum"  placeholder="请输入证件号" autocomplete="off" class="layui-input" lay-verify="cardnum" id="cardnum" oninput="getUserinfoList()"  onfocus="getUserinfoList()" onblur="select_cardnumblur();">
                                            <i class="layui-icon layui-icon-search" style="position: absolute;top:8px;right: 8px;" onclick="getUserByCard();"></i>
                                        </div>
                                        <dl class="layui-anim layui-anim-upbit"  id="cardnum_ssid"    >

                                        </dl>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-col-md6 layui-col-xs6 layui-col-lg6">
                                <label class="layui-form-label"><span style="color: red;font-weight: initial">*</span>姓名</label>
                                <div class="layui-input-block">
                                    <input type="text" name="username" id="username"  lay-verify="username" placeholder="请输入姓名" autocomplete="off" class="layui-input">
                                </div>
                            </div>

                            <div class="layui-col-md6 layui-col-xs6 layui-col-lg6">
                                <div class="layui-col-md6 layui-col-xs6 layui-col-lg6">
                                    <label class="layui-form-label">年龄</label>
                                    <div class="layui-input-block"  >
                                        <input type="number" name="age" id="age"  placeholder="" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-col-md6 layui-col-xs6 layui-col-lg6">
                                    <label class="layui-form-label" >性别</label>
                                    <div class="layui-input-block" >
                                        <select name="sex"  id="sex" >
                                            <option value=""></option>
                                            <option value="1">男</option>
                                            <option value="2">女</option>
                                            <option value="-1">未知</option>
                                        </select>
                                    </div>
                                </div>

                            </div>
                            <div class="layui-col-md6 layui-col-xs6 layui-col-lg6">
                                <label class="layui-form-label">出生日期</label>
                                <div class="layui-input-block">
                                    <input type="text" name="both"  id="both"  placeholder="" autocomplete="off" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-col-md6 layui-col-xs6 layui-col-lg6">
                                <label class="layui-form-label">政治面貌</label>
                                <div class="layui-input-block">
                                    <select name="politicsstatus"   lay-search="" id="politicsstatus">
                                        <option value="群众">群众</option>
                                        <option value="中国致公党党员">中国致公党党员</option>
                                        <option value="台湾民主自治同盟盟员">台湾民主自治同盟盟员</option>
                                        <option value="无党派自由人士">无党派自由人士</option>
                                        <option value="中国共产党党员">中国共产党党员</option>
                                        <option value="中国共产党预备党员">中国共产党预备党员</option>
                                        <option value="中国共产主义青年团团员">中国共产主义青年团团员</option>
                                        <option value="中国国民党革命委员会会员">中国国民党革命委员会会员</option>
                                        <option value="中国民主同盟盟员">中国民主同盟盟员</option>
                                        <option value="中国民主建国会会员">中国民主建国会会员</option>
                                        <option value="中国民主促进会会员">中国民主促进会会员</option>
                                        <option value="中国农民民主党员">中国农民民主党员</option>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-col-md6 layui-col-xs6 layui-col-lg6">
                                <label class="layui-form-label">民族</label>
                                <div class="layui-input-block">
                                    <select name="national"  lay-search="" id="national">
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-col-md6 layui-col-xs6 layui-col-lg6">
                                <label class="layui-form-label">国籍</label>
                                <div class="layui-input-block">
                                    <select name="nationality"  lay-search="" id="nationality">
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <div class="layui-col-md12 layui-col-xs12 layui-col-lg12">
                                <label class="layui-form-label">户籍地</label>
                                <div class="layui-input-block">
                                    <input type="text" name="domicile"  id="domicile"  placeholder="请输入省市区街道详细地址" autocomplete="off" class="layui-input">
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="layui-card" >
                    <div class="layui-card-header">案件基本信息</div>
                    <div style="margin: auto; ">
                        <div class="layui-card-body  layui-row layui-col-space10" >
                            <div class="layui-col-md6 layui-col-xs6 layui-col-lg6">
                                <label class="layui-form-label"><span style="color: red;font-weight: initial">*</span>案件名称</label>
                                <div class="layui-input-block">
                                    <div class="layui-col-md12 layui-col-xs12 layui-col-lg12">
                                        <div class="layui-form-select">
                                            <div class="layui-select-title">
                                                <input type="text" name="casename"  lay-verify="casename" placeholder="请输入案件名称" autocomplete="off" class="layui-input" id="casename" oninput="getCaseList()"  onblur="select_caseblur();" onfocus="getCaseList()">
                                                <i class="layui-icon layui-icon-add-circle" style="position: absolute;top:8px;right:  8px;cursor: pointer;" title="选择其他案件" onclick="open_othercases();"></i>
                                            </div>
                                            <dl class="layui-anim layui-anim-upbit"  id="casename_ssid"   >

                                            </dl>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-col-md6 layui-col-xs6 layui-col-lg6">
                                <label class="layui-form-label">案发时间</label>
                                <div class="layui-input-block">
                                    <input type="text" name="occurrencetime"  id="occurrencetime"  placeholder="" autocomplete="off" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-col-md6 layui-col-xs6 layui-col-lg6">
                                <label class="layui-form-label"><span style="color: red;font-weight: initial">*</span>记录人</label>
                                <div class="layui-input-block">
                                    <select name="recordadmin"  id="recordadmin"  lay-search="" lay-verify="recordadmin">

                                    </select>
                                </div>
                            </div>
                            <div class="layui-col-md12 layui-col-xs12 layui-col-lg12">
                                <div class="layui-input-block" style="float: right">
                                    <button class=" layui-btn layui-btn-warm  layui-btn-lg" type="button" style="float: right" id="startrecord_btn"  lay-submit="" lay-filter="startrecord_btn">开始审讯</button>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
        </div>
    </form>

</div>

</body>

<script th:src="@{/js/jquery-1.11.1.js}" type="text/javascript"></script>
<script th:src="@{/js/url.js}" type="text/javascript"></script>
<script th:src="@{/js/common.js}"  type="text/javascript" ></script>
<script th:src="@{/js/actionid.js}" type="text/javascript"></script>
<script th:src="@{/js/list.js}" type="text/javascript"></script>
<script th:src="@{/layui/layui.js}"type="text/javascript"></script>
<script th:src="@{/layui/lay/modules/laytpl.js}" type="text/javascript"></script>
<script th:src="@{/js/client_web/police/conversation/startConversation.js}" type="text/javascript"></script>
<script th:src="@{/js/socket.io.js}" type="text/javascript"></script>

<script th:inline="javascript">
    var INIT_CLIENT;
    var INIT_CLIENTKEY;
    var socket;
    var sessionadminssid=[[${session.MANAGE_CLIENT.ssid}]];
   var  parentbool=[[${startConversationModel.parentbool}]]
    $(function(){
        INIT_CLIENT=[[${session.INIT_CLIENT}]];
        INIT_CLIENTKEY=[[${session.INIT_CLIENTKEY}]];
        setpageAction(INIT_CLIENT,"client_web/police/conversation/startConversation");
        getAdminList();
        getCards();
        getNationalitys();
        getNationals();
    });
    layui.use(['layer','element','form','laydate'], function(){
        var layer = layui.layer; //获得layer模块
        var element = layui.element;
        var form = layui.form;
        var laydate = layui.laydate;
        //使用模块
        laydate.render({
            elem: '#both' //指定元素
        });
        laydate.render({
            elem: '#occurrencetime' //指定元素
            ,type:"datetime"
            ,value: new Date(Date.parse(new Date()))
            ,format: 'yyyy-MM-dd HH:mm:ss'
        });

        form.verify({
            cardnum:function (value) {
            var cardtypetext = $("#cards option:selected").text();
            var nationality = $("#nationality option:selected").text();//国籍
            if (!(/\S/).test(value)) {
                    return "请输入证件号码"
             }
             if ($.trim(cardtypetext) == "居民身份证" &&($.trim(nationality)=="中国"||!isNotEmpty(nationality))) {
                    var checkidcard_bool=checkIDCard(value);
                    if (!checkidcard_bool) {
                        return "请输入有效的18位居民身份证号码";
                    }
              }
        },
            username:[ /\S/,"请输入姓名"],
            casename:[ /\S/,"请输入案件名称"],
            recordadmin:[ /\S/,"请输入记录人"],
        });


        form.on('submit(startrecord_btn)', function (data) {
            addCaseToArraignment();
            return false;
        });
    });

</script>
</html>